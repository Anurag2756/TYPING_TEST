<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üñãÔ∏è Typing Speed & Accuracy Test</title>

  <!-- Google font for Hindi support -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
  --bg1: #0f172a;
  --bg2: #1e293b;
  --accent: #6366f1;
  --accent-2: #06b6d4;
  --card: rgba(255, 255, 255, 0.08);
  --glass: rgba(255, 255, 255, 0.12);
  --muted: #cbd5e1;
  --radius: 16px;
}

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: radial-gradient(circle at 20% 30%, #0f172a 0%, #1e293b 100%);
  color: #f8fafc;
  background-attachment: fixed;
  overflow-x: hidden;
}

.wrap {
  max-width: 950px;
  margin: 40px auto;
  padding: 24px;
}

header.appbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 22px;
  flex-wrap: wrap;
}

.brand {
  display: flex;
  align-items: center;
  gap: 14px;
}

.app-icon {
  width: 58px;
  height: 58px;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 26px;
  box-shadow: 0 8px 24px rgba(79, 70, 229, 0.3);
  transition: transform 0.3s ease;
}
.app-icon:hover {
  transform: rotate(10deg) scale(1.1);
}

.title {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 0.5px;
}
.subtitle {
  font-size: 13px;
  color: var(--muted);
  margin-top: 2px;
}

.controls-top {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--glass);
  padding: 6px 10px;
  border-radius: 10px;
  backdrop-filter: blur(8px);
}

.lang-select {
  padding: 8px 10px;
  border-radius: 8px;
  border: none;
  outline: none;
  background: #1e293b;
  color: #f8fafc;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.3s;
}
.lang-select:hover {
  background: #334155;
}

main.card {
  background: var(--card);
  border-radius: var(--radius);
  padding: 22px;
  backdrop-filter: blur(16px);
  box-shadow: 0 10px 35px rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
main.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 45px rgba(99, 102, 241, 0.3);
}

.meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 14px;
}

#timer {
  font-weight: 700;
  color: var(--accent-2);
  font-size: 18px;
}

.progress-bar {
  height: 10px;
  background: #334155;
  border-radius: 999px;
  overflow: hidden;
  margin-top: 8px;
}
.progress {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  width: 100%;
  transition: width 1s linear;
}

#paragraph {
  background: rgba(255, 255, 255, 0.05);
  padding: 16px;
  border-radius: 12px;
  line-height: 1.8;
  font-size: 17px;
  color: #e2e8f0;
  margin-bottom: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: box-shadow 0.3s ease;
}
#paragraph:hover {
  box-shadow: 0 0 20px rgba(99, 102, 241, 0.25);
}
#paragraph[lang="hi"] {
  font-family: 'Noto Sans Devanagari', serif;
  font-size: 18px;
}

textarea#input {
  width: 100%;
  height: 140px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(15, 23, 42, 0.6);
  color: #f8fafc;
  padding: 12px;
  font-size: 16px;
  resize: none;
  outline: none;
  font-family: Inter, serif;
  transition: border 0.3s;
}
textarea#input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
}

.buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 12px;
}

button {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
}
button.secondary {
  background: #1e293b;
  color: var(--accent-2);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.result {
  display: none;
  background: rgba(255, 255, 255, 0.05);
  padding: 16px;
  border-radius: 12px;
  margin-top: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
  animation: fadeIn 0.8s ease;
}
.result h3 {
  margin: 0 0 8px;
  font-size: 18px;
  color: var(--accent-2);
}

footer {
  margin-top: 25px;
  text-align: center;
  color: var(--muted);
  font-size: 13px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Responsive */
@media (max-width: 700px) {
  .app-icon { width: 50px; height: 50px; font-size: 20px; }
  .brand .subtitle { display: none; }
  .meta { flex-direction: column; align-items: flex-start; gap: 6px; }
  .wrap { padding: 16px; }
  textarea#input { height: 120px; }
}

/* Typing highlights */
#paragraph span.correct { color: #4ade80; font-weight: 500; }
#paragraph span.wrong { color: #f87171; text-decoration: underline wavy red; }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="appbar">
      <div class="brand">
        <div class="app-icon" aria-hidden="true">‚å®Ô∏è</div>
        <div>
          <div class="title">üñãÔ∏è Typing Speed & Accuracy Test</div>
          <div class="subtitle">Practice typing ‚Äî English & ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</div>
        </div>
      </div>

      <div class="controls-top">
        <label for="language" style="font-size:14px;color:var(--muted);margin-right:6px">Language</label>
        <select id="language" class="lang-select" aria-label="Select language">
          <option value="en">English</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        </select>
      </div>
    </header>

    <main class="card" role="main">
      <div class="meta">
        <div>
          <div id="timer">Time Left: 60s</div>
          <div class="progress-bar"><div id="progress" class="progress"></div></div>
        </div>

        <div style="text-align:right;color:var(--muted)">
          <div id="status">Backspaces: 0</div>
          <div style="font-size:13px" id="wordsInfo">Words: 0</div>
        </div>
      </div>

      <div id="paragraph" lang="en">Click <strong>Start / Restart</strong> to begin. Choose language and practice paragraphs appear here.</div>

      <textarea id="input" placeholder="Click Start to begin typing..." disabled aria-label="Typing input area"></textarea>

      <div class="buttons">
        <button id="startBtn">Start / Restart</button>
        <button id="nextBtn" class="secondary">Next Paragraph</button>
        <button id="showBtn" class="secondary">Show Result</button>
      </div>

      <div id="result" class="result" aria-live="polite"></div>
    </main>

    <footer>¬© 2025 Anurag Tripathi. All Rights Reserved.</footer>
  </div>

<script>
/* ---------- Data: English + 30 Hindi paragraphs ---------- */
const englishSamples = [
  "Artificial Intelligence allows machines to mimic human behavior and learn from experience.",
    "Web development involves both front-end and back-end technologies to create dynamic websites.",
    "Cloud computing enables users to store and access data remotely over the Internet.",
    "Data Science combines statistics, programming, and domain expertise to analyze information.",
    "Cybersecurity protects computer systems and networks from digital attacks and unauthorized access.",
    "Internet of Things connects everyday objects to the internet, enabling smarter communication.",
    "Machine learning helps computers improve their performance automatically using training data.",
    "Responsive design ensures web pages look great on all devices and screen sizes.",
  "The quick brown fox jumps over the lazy dog.",
  "JavaScript makes websites interactive and dynamic.",
  "Practice improves typing speed and accuracy.",
  "Coding is fun when logic becomes your language.",

  "Learning to code is like learning to speak a new language ‚Äî at first it‚Äôs confusing, but soon you start thinking in it. Once logic becomes part of your thought process, solving problems feels like solving puzzles every day.",
  
  "Technology changes fast, and so should your mindset. The more you experiment with code, the better you understand how creativity and logic come together to build something meaningful for the digital world.",
  
  "Success in programming doesn‚Äôt come from reading tutorials alone. It comes from endless hours of debugging, testing, and fixing what didn‚Äôt work before. Every error message is just a hint towards a better solution.",
  
  "Typing faster isn‚Äôt just about speed ‚Äî it‚Äôs about rhythm and focus. As your fingers flow across the keyboard, your thoughts start syncing with your hands, turning ideas into code effortlessly.",
  
  "A website is more than just text and images. It‚Äôs a digital story where design, code, and creativity meet. Every click, hover, and scroll reveals something new about your imagination.",
  
  "When you write code, you‚Äôre not just telling a computer what to do ‚Äî you‚Äôre teaching it to think step by step. That‚Äôs what makes programming both logical and magical.",
  
  "Every programmer starts with confusion and frustration, but that‚Äôs how learning works. The more errors you fix, the more confident you become. Every small victory builds your foundation for the big ones.",
  
  "Web development is the art of blending creativity with precision. A single line of CSS can transform a dull layout into a stunning visual masterpiece that captures attention instantly.",
  
  "Debugging might seem boring, but it‚Äôs actually detective work for developers. You trace clues, follow logic, and discover where something went wrong. Solving bugs gives you a sense of real accomplishment.",
  
  "The future belongs to those who can adapt to change. In technology, every new skill you learn adds a new superpower to your professional journey.",
  
  "Sometimes your code doesn‚Äôt work not because it‚Äôs wrong, but because it‚Äôs teaching you patience and problem-solving. Every ‚Äòerror‚Äô is an opportunity to grow.",
  
  "Artificial Intelligence and Machine Learning are transforming the world. From self-driving cars to chatbots, it‚Äôs all about teaching machines to think, learn, and make smart decisions on their own.",
  
  "A great developer is not one who knows everything, but one who knows how to find the right solution efficiently. Curiosity and persistence are your best teachers in coding.",
  
  "Creativity in tech isn‚Äôt about colors or fonts ‚Äî it‚Äôs about finding new ways to solve old problems. Every innovative app started with someone asking, ‚ÄòWhat if we tried this instead?‚Äô",
  
  "Collaboration is the heart of great development. Coding together, reviewing each other‚Äôs work, and brainstorming solutions lead to better results than working in isolation.",
  
  "User experience design is not just about looks; it‚Äôs about how people feel while using your creation. The best designs are invisible ‚Äî they just work naturally.",
  
  "Continuous learning keeps you ahead in tech. Read, experiment, and fail often. The only real failure is not trying at all.",
  
  "Every successful coder was once a beginner who didn‚Äôt quit. Keep typing, keep testing, and keep improving ‚Äî because the best projects start with persistence and passion."


];

const hindiSamples = [
  "‡§ü‡§æ‡§á‡§™‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§™‡•Ä‡§° ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§§‡§ø‡§¶‡§ø‡§® ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§",
  "‡§§‡§ï‡§®‡•Ä‡§ï ‡§®‡•á ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡•ã ‡§è‡§ï ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§ï‡•á ‡§î‡§∞ ‡§ï‡§∞‡•Ä‡§¨ ‡§≤‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à‡•§",
  "‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∏‡•Å‡§≤‡§ù‡§æ‡§®‡•á ‡§ï‡•Ä ‡§ï‡§≤‡§æ ‡§π‡•à‡•§",
  "‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§∏‡§Æ‡§æ‡§ú ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§≤‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
  "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§®‡§æ ‡§î‡§∞ ‡§°‡•á‡§ü‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡§®‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§",
  "‡§ï‡§†‡§ø‡§® ‡§™‡§∞‡§ø‡§∂‡•ç‡§∞‡§Æ ‡§µ ‡§ß‡•à‡§∞‡•ç‡§Ø ‡§∏‡•á ‡§∏‡§´‡§≤‡§§‡§æ ‡§Æ‡§ø‡§≤‡§§‡•Ä ‡§π‡•à‡•§",
  "‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•Å‡§∂‡§≤‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§π‡•ã‡§ó‡•Ä‡•§",
  "‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§è‡§ï ‡§Ö‡§π‡§Æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§π‡•à‡•§",
  "‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•å‡§∂‡§≤ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§¨‡§π‡•Å‡§§ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•ã‡§Ç‡§ó‡•á‡•§",
  "‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§™‡§∞ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§¶‡§ø‡§ñ‡§§‡•á ‡§π‡•à‡§Ç‡•§",
  "‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§ü‡§æ‡§á‡§™‡§ø‡§Ç‡§ó ‡§ï‡§æ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§≠‡•Ä ‡§â‡§§‡§®‡§æ ‡§π‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§π‡•à‡•§",
  "‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§™‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§Ö‡§µ‡§∏‡§∞ ‡§Æ‡§ø‡§≤‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§",
  "‡§ï‡§à ‡§õ‡•ã‡§ü‡•á ‡§ï‡§¶‡§Æ‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§π‡§æ‡§∏‡§ø‡§≤ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§",
  "‡§∞‡•ã‡§ú‡§º‡§Æ‡§∞‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§¶‡§ø‡§®‡§ö‡§∞‡•ç‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§§‡§ï‡§®‡•Ä‡§ï ‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§µ‡•á‡§∂ ‡§≤‡§æ‡§≠‡§ï‡§æ‡§∞‡•Ä ‡§π‡•à‡•§",
  "‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§ï‡•ã‡§° ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§∏‡•Ä‡§ñ‡•á‡§Ç‡•§",
  "‡§°‡•á‡§ü‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§",
  "‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï‡§§‡§æ ‡§î‡§∞ ‡§§‡§∞‡•ç‡§ï ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡§Ç‡•§",
  "‡§∏‡•â‡§´‡•ç‡§ü‡§µ‡•á‡§Ø‡§∞ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§è‡§ï ‡§ü‡•Ä‡§Æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§π‡•à‡•§",
  "‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•Ä ‡§ú‡§°‡§º ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡§®‡§æ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡•§",
  "‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞‡§§‡§æ ‡§î‡§∞ ‡§®‡§ø‡§∞‡§Ç‡§§‡§∞‡§§‡§æ ‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§π‡•à‡§Ç‡•§",
  "‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∏‡•á ‡§π‡•Ä ‡§∏‡§ö‡•ç‡§ö‡•Ä ‡§∏‡§Æ‡§ù ‡§Æ‡§ø‡§≤‡§§‡•Ä ‡§π‡•à‡•§",
  "‡§ï‡§†‡•ã‡§∞ ‡§Æ‡•á‡§π‡§®‡§§ ‡§ï‡§æ ‡§ï‡•ã‡§à ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§",
  "‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§â‡§™‡§ï‡§∞‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç‡•§",
  "‡§®‡§è ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§®‡•á ‡§∏‡•á ‡§°‡§∞‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ö‡§æ‡§π‡§ø‡§è‡•§",
  "‡§ü‡•á‡§ï‡•ç‡§®‡•ã‡§≤‡•â‡§ú‡•Ä ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§∏‡§Æ‡§æ‡§ú ‡§ï‡•ã ‡§∏‡•Å‡§ß‡§æ‡§∞‡§§‡§æ ‡§π‡•à‡•§",
  "‡§∏‡§Æ‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§∞ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§¶‡§ø‡§® ‡§¨‡•á‡§π‡§§‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç‡•§",
  "‡§∏‡§π‡§Ø‡•ã‡§ó ‡§î‡§∞ ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§∏‡•á ‡§ü‡•Ä‡§Æ ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§¨‡§®‡§§‡•Ä ‡§π‡•à‡•§",
  "‡§∏‡§π‡§ú ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§",
  "‡§õ‡•ã‡§ü‡•á ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§¨‡§¢‡§º‡§§‡§æ ‡§π‡•à‡•§",
  "‡§®‡§ø‡§∞‡§Ç‡§§‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§π‡•Ä ‡§Æ‡§π‡§æ‡§®‡§§‡§æ ‡§ï‡•Ä ‡§®‡•Ä‡§Ç‡§µ ‡§π‡•à‡•§"
];

/* ---------- State ---------- */
let lang = 'en';
let currentText = '';
let timer = 60;
let intervalId = null;
let typingStarted = false;
let backspaceCount = 0;
let correctWords = 0, wrongWords = 0, totalWords = 0;

/* ---------- Elements ---------- */
const languageEl = document.getElementById('language');
const paragraphEl = document.getElementById('paragraph');
const inputEl = document.getElementById('input');
const timerEl = document.getElementById('timer');
const progressEl = document.getElementById('progress');
const startBtn = document.getElementById('startBtn');
const nextBtn = document.getElementById('nextBtn');
const showBtn = document.getElementById('showBtn');
const resultEl = document.getElementById('result');
const statusEl = document.getElementById('status');
const wordsInfoEl = document.getElementById('wordsInfo');

/* ---------- Helpers ---------- */
function chooseRandomSample() {
  if (lang === 'hi') {
    return hindiSamples[Math.floor(Math.random() * hindiSamples.length)];
  } else {
    return englishSamples[Math.floor(Math.random() * englishSamples.length)];
  }
}

function resetCounters() {
  timer = 60;
  clearInterval(intervalId);
  typingStarted = false;
  backspaceCount = 0;
  correctWords = 0;
  wrongWords = 0;
  totalWords = 0;
  timerEl.textContent = `Time Left: ${timer}s`;
  progressEl.style.width = '100%';
  statusEl.textContent = `Backspaces: ${backspaceCount}`;
  wordsInfoEl.textContent = `Words: ${totalWords}`;
  resultEl.style.display = 'none';
}

/* ---------- Language switch ---------- */
languageEl.addEventListener('change', (e) => {
  lang = e.target.value;
  loadNewParagraph();
});

/* ---------- Load / Next paragraph ---------- */
function loadNewParagraph() {
  currentText = chooseRandomSample();
  paragraphEl.lang = (lang === 'hi') ? 'hi' : 'en';
  paragraphEl.innerHTML = escapeHtml(currentText);
  inputEl.value = '';
  inputEl.disabled = true;
  resetCounters();
}

/* ---------- Start / Restart ---------- */
startBtn.addEventListener('click', () => {
  loadNewParagraph();
  inputEl.disabled = false;
  inputEl.focus();
  resetCounters();
  startTimerWhenTyping();
});

/* ---------- Next paragraph ---------- */
nextBtn.addEventListener('click', () => {
  loadNewParagraph();
  inputEl.disabled = false;
  inputEl.focus();
});

/* ---------- Show Result (only when clicked) ---------- */
showBtn.addEventListener('click', () => {
  // if nothing typed, warn
  const text = inputEl.value.trim();
  if (!text) {
    alert((lang === 'hi') ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ï‡•Å‡§õ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§' : 'Please type something first!');
    return;
  }
  computeAndShowResult();
});

/* ---------- Input events: track typing, backspace, words ---------- */
inputEl.addEventListener('keydown', (e) => {
  if (e.key === 'Backspace') backspaceCount++;
});

inputEl.addEventListener('input', (e) => {
  if (!typingStarted && inputEl.value.length === 1) {
    typingStarted = true;
    startTimer();
  }
  computeLiveCounts();
});

/* ---------- Timer ---------- */
function startTimer() {
  clearInterval(intervalId);
  intervalId = setInterval(() => {
    timer--;
    timerEl.textContent = `Time Left: ${timer}s`;
    progressEl.style.width = `${(timer / 60) * 100}%`;
    if (timer <= 0) {
      clearInterval(intervalId);
      inputEl.disabled = true;
    }
  }, 1000);
}

/* Start timer only when typing starts (for better UX) */
function startTimerWhenTyping() {
  // if user starts typing, input listener will start timer
}

/* ---------- Compute correct/wrong words live ---------- */
function computeLiveCounts() {
  const typed = inputEl.value.trim();
  if (!typed) {
    correctWords = wrongWords = totalWords = 0;
    statusEl.textContent = `Backspaces: ${backspaceCount}`;
    wordsInfoEl.textContent = `Words: ${totalWords}`;
    return;
  }
  const typedWords = typed.split(/\s+/);
  const targetWords = currentText.trim().split(/\s+/);
  correctWords = 0; wrongWords = 0;
  typedWords.forEach((w, i) => {
    if (targetWords[i] && w === targetWords[i]) correctWords++;
    else wrongWords++;
  });
  totalWords = typedWords.length;
  statusEl.textContent = `Backspaces: ${backspaceCount}`;
  wordsInfoEl.textContent = `Words: ${totalWords}`;
}

/* ---------- Compute and show final result ---------- */
function computeAndShowResult() {
  const typed = inputEl.value.trim();
  const typedWords = typed ? typed.split(/\s+/) : [];
  const targetWords = currentText.trim().split(/\s+/);

  // word counts
  totalWords = typedWords.length;
  correctWords = 0; wrongWords = 0;
  for (let i = 0; i < typedWords.length; i++) {
    if (targetWords[i] && typedWords[i] === targetWords[i]) correctWords++;
    else wrongWords++;
  }

  // accuracy: by characters match
  let charCorrect = 0;
  const typedChars = typed;
  for (let i = 0; i < typedChars.length; i++) {
    if (currentText[i] && typedChars[i] === currentText[i]) charCorrect++;
  }
  const accuracy = totalWords > 0 ? ((charCorrect / currentText.length) * 100).toFixed(2) : 0;

  // WPM: correctWords per minute based on elapsed time (or 60s if time ran out)
  const elapsed = 60 - timer; // seconds
  const minutes = elapsed > 0 ? elapsed / 60 : 1/60;
  const wpm = Math.round(correctWords / minutes);

  // Show result
  resultEl.style.display = 'block';
  resultEl.innerHTML = `
    <h3>${(lang === 'hi') ? '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂' : 'Result Summary'}</h3>
    <p><strong>${(lang === 'hi') ? '‡§ï‡•Å‡§≤ ‡§∂‡§¨‡•ç‡§¶ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§ø‡§è:' : 'Total Words Typed:'}</strong> ${totalWords}</p>
    <p><strong>${(lang === 'hi') ? '‡§∏‡§π‡•Ä ‡§∂‡§¨‡•ç‡§¶:' : 'Correct Words:'}</strong> ${correctWords}</p>
    <p><strong>${(lang === 'hi') ? '‡§ó‡§≤‡§§ ‡§∂‡§¨‡•ç‡§¶:' : 'Wrong Words:'}</strong> ${wrongWords}</p>
    <p><strong>${(lang === 'hi') ? '‡§¨‡•à‡§ï‡§∏‡•ç‡§™‡•á‡§∏ ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ:' : 'Backspaces Used:'}</strong> ${backspaceCount}</p>
    <p><strong>${(lang === 'hi') ? '‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ:' : 'Accuracy:'}</strong> ${accuracy}%</p>
    <p><strong>WPM:</strong> ${wpm}</p>
    <p style="margin-top:8px;color:var(--muted);font-size:13px">${(lang === 'hi') ? '‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç:' : 'Note:'} ${ (lang==='hi')? '‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡•á‡§µ‡§≤ "Show Result" ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§¶‡§ø‡§ñ‡§§‡•á ‡§π‡•à‡§Ç‡•§' : 'Results are shown only when you click "Show Result".'}</p>
  `;
}

/* ---------- Utility: escape HTML ---------- */
function escapeHtml(text) {
  return text.replace(/[&<>"']/g, function(m) { return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m]); });
}

/* ---------- Initialize on load ---------- */
window.addEventListener('load', () => {
  // ensure Hindi font loads and page uses UTF-8
  languageEl.value = 'en';
  lang = 'en';
  loadNewParagraph();
});
</script>
</body>
</html>
